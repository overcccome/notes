#                             计算机网络原理

##                                第一章、计算机网络概述

###  第一节、计算机网络的基本概念

- 计算机网络是互连的、自治的计算机的集合

- ISP：提供公共网络服务的机构,有国家级的约有地区级的

- 协议：协议是通信实体之间在数据交换过程中所需要遵循的规则或约定，包括三个基本要素：
  ①语法--就是交换信息的格式
  ②语义--在交换信息中所采用的数据代表的含义③时序--交换信息过程中工作的顺序，先干什么，回应什么再做什么

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232143768.png" alt="image-20221223214347386" style="zoom: 50%;" />

- 计算机网络的分类

  - 按覆盖范围：个域网、局域网、城域网、广域网

  - 按拓扑结构：星形、总线型、环形、网状、树状、混合拓扑结构等

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232144528.png" alt="image-20221223214444314" style="zoom:50%;" />

  - 按交换方式：电路交换网络、报文交换网络和分组交换网络

  - 按网络用户属性：公有网、私有网

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232145336.png" alt="image-20221223214525965" style="zoom:50%;" />

###  第二节、计算机网络机构

-  一、网络边缘

	- 各种服务器以及访问的终端 比如电脑、手机等设备要处理大量数据，提供软件服务

-  二、接入网络（连接边缘网络和核心网络）

	- 方式： 
1、电话拨号
2、非对称用户数字线ADSL（现在用的多）
3、混合光纤同轴电缆HFC
4、局域网
5、移动接入网络

- 三、网络核心

  - 由通信链路互连的分组交换设备构成的网络，作用是实现网络边缘中主机之间的数据中继与转发

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232146139.png" alt="image-20221223214607929" style="zoom: 50%;" />

###  第三节、数据交换技术

- 电路交换：实时性高，缺点是信道利用率低

- 报文交换： 以报文为单位在交换网络的各结点之间以存储-转发的方式传送。
  1、不需要建立连接。
  2、只有当报文被转发时才占用相应的通道。  
  3、交换节点需要缓冲存储，报文需要排队，增加了延时。

- 分组交换：将一个完整报文拆分成若干个分组，分组传输过程通常也采用存储-转发交换方式。
  优点:
  (1)交换设备存储容量要求低

  (2)交换速度快;

  (3)可靠传输效率高;

  (4)更加公平。

  分组长度的确定:

  (1)分组长度与延迟时间

  (2)分组长度与误码率

###  第四节、计算机网络性能

-  一、速率与带宽（带宽越宽，速率越高）

	-  1.速率是指网络单位时间内传送的数据量，也称为数据传输速率或数据速率。速率的基本单位是bit/s(位每秒)。
2.在计算机网络中，有时也会用“带宽”这一术语描述速率。
3.带宽原本是指信号具有的频带宽度，即信号成分的最高频率与最低频率之差，单位为Hz(赫兹)。

-  二、时延

	- ----- 时延是指数据从网络中的一个结点（主机或交换设备等）到达另一结点所需要的时间。
-----分组的每跳传输过程主要产生四类时间延迟：结点处理延迟、排队时延、传输时延和传播时延（传输时延类似于搬运工，把数据搬到要传播的位置上，然后进行传播即传播时延）

- 三、时延带宽积

  -  一段物理链路的传播时延与链路带宽的乘积，表示一段链路可以容纳的数据位数，也称为以位为单位的链路长度。

  	- 也就是这段链路上可以容纳的数据量
  	
  	  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232251762.png" alt="image-20221223225102723"  />

-  四、丢包率

	-  和网络可靠性有关，用来评价和衡量网络性能的指标，在很大程度上可以反映网络的拥塞程度。
丢包率=丢失分组总数/发送分组总数

		-  一旦网络拥塞，我们的分组本应该传输到这个结点以后被存储然后再进行转换，但是呢网络很拥堵，这个结点堵车了，能够存储的数据有限，新来的分组没有办法再进行存储和排队了，那这个时候只能把它丢掉，这个包再网络上就丢失掉，永远无法到达终点

-  五、吞吐量

	-   单位时间内源主机通过网络向目的主机实际送达的数据量。
  经常用于度量网络的实际数据传送（通过）能力，即网络实际可以达到的源主机到目的主机的数据传送速率。

###  第五节、计算机网络体系结构

-  1、分层思想：计算机网络完成的所有功能可以划分为若干层，每层完成一部分子功能，每层在完成相应功能时与另一通信实体的相同层按照某种协议进行信息交换。
2、体系结构定义：计算机网络所划分的层次以及各层协议的集合称为计算机网络体系结构。
- OSI参考模型

	-  这个模型是提供参考的，实际不会使用<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232146458.png" alt="image-20221223214650016" style="zoom:50%;" />

- TCP/IP参考模型

  - -----网络接口层包括物理层和数据链路层。
  -----应用层涵盖了OSI里面的会话层、表示层和应用层。
  -----网际层就是网络层

  	- ①网络接口层：实现物理层传输比特流的功能，实现数据链路层点到点之间数据帧的可靠传输功能。
  	
  	  ②网际层：实现网络之间从源主机到目的主机之间的路径选择。
  	
  	  ③运输层：主要实现复用、分用、可靠传输之类的功能。
  	
  	  ④应用层：针对各种应用的需求，完成特定的功能。<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232147351.png" alt="image-20221223214732050" style="zoom:50%;" />

-  五层参考模型

	-  物理层处理比特流<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232148572.png" alt="image-20221223214813367" style="zoom:50%;" />

##                                        

##                                          第二章、网络应用

###  第一节、计算机网络应用体系结构

- 1、客户/服务器（C/S）结构：最主要的特征是通信只在客户与服务器之间进行，客户与客户之间不进行直接通信。

  2、P2P（Peer to Peer）结构：即点对点结构，每个对等端都同时具备C/S应用的客户与服务器的特征，是一个服务器与客户的结合体，对等端之间直接通信。

  3、混合结构：既有中心服务器的存在，又有对等端（客户）间的直接通信。

###  第二节、网络应用通信基本原理

- 基本原理都是一样的

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232148894.png" alt="image-20221223214854584" style="zoom: 50%;" />

###  第三节、域名系统（DNS)

- 域名是一种采用特定字符、符号，以特定的结构来表示计算机名称的一种命名方法，采用层次树状结构的命名方法。

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232149525.png" alt="image-20221223214949346" style="zoom:50%;" />

- 二、域名服务器

	-  1、域名解析：将域名映射为IP地址的过程，将域名转换为IP地址这个工作由域名服务器来做。
	-  2、域名服务器：为了实现域名解析，需要建立分布式数据，存储网络中域名与IP地址的映射关系数据，这些数据库存储在域名服务器上，域名服务器根据用户的请求提供域名解析服务。 
	-  3、域名服务器分类：
根域名服务器：主要管理的是根域。
顶级域名服务器
权威域名服务器
本地域名服务器：直接为用户提供服务，比如查询等。

- 三、域名解析过程

  - 1、递归查询：代替查询主机或其他域名服务器，进行进一步的域名查询，并将最终解析结果发送给查询主机或服务器。
    2、迭代查询：只是将下一步要查询的服务器告知查询主机或服务器。

    - <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232150263.png" alt="image-20221223215030917" style="zoom:50%;" />

      <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232259185.png" alt="image-20221223225946893" style="zoom: 67%;" />

    -  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232151090.png" alt="image-20221223215114736" style="zoom:50%;" />

###  第四节、万维网应用

- 一、万维网应用结构

  - 万维网数据传输采用的是基于运输层的TCP连接，TCP的作用是保证传输的可靠性，数据不会出错

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232151885.png" alt="image-20221223215150513" style="zoom:50%;" />

- 二、HTTP

  -  概念：超文本传输协议，定义浏览器如何向web服务器发送请求以及web服务器如何向浏览器进行响应。
  版本：HTTP/1.0和HTTP/1.1
  HTTP连接：非持久连接、持久连接。

  	- 这两种都是非持久连接<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232152232.png" alt="image-20221223215222816" style="zoom:50%;" />
  	-  这两种都是持久连接 ，流水方式持久连接对服务器的压力比较大，采取哪种方式比较好要看站在哪一个角度考虑<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232152918.png" alt="image-20221223215252589" style="zoom:50%;" />

  - HTTP报文

    请求报文：从客户向服务器发送请求报文
    响应报文：从服务器到客户的回答

    - 请求报文

      -----方法是浏览器或者客户端发给服务器的指令，告诉服务器要做什么。
      -----看URL可以知道你要获取的是服务器资源哪个目录下的文件。
      -----首部行字段名和值就类似于输入的账号密码用户名等，如果被别人截获就容易泄露信息，所以http是不安全的，需要采取一些其他手段使得不泄露

      <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232153409.png" alt="image-20221223215323066" style="zoom:50%;" />

      -  HTTP请求报文：
      HTTP典型的请求方法有GET、HEAD、POST、OPTION、PTU等。
      ①GET：是最常使用的，就是告诉服务器你给我提供哪个url的资源，请求读取由url所标识的信息。
      ②HEAD：比如搜索引擎，抓取页面的关键字等，让人大概知道这个页面是什么信息的，因为抓取整个页面数据量太大。
      -  GET:请求读取由URL所标识的信息。
      HEAD:请求读取由URL所标识的信息的首部，无须在响应报文中包含对象。
      POST:给服务器添加信息(例如，注释)。4)OPTION:请求一些选项的信息。
      PUT:在指明的URL下存储一个文档。

    -  响应报文

       *  -----版本是http协议的版本
         -----状态码是有含义的，是http协议中规定好的，一般是三位十进制的数字。
         -----短语：描述状态行的含义

         <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232306813.png" alt="image-20221223230623654" style="zoom:50%;" />

         <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232308636.png" alt="image-20221223230800442" style="zoom:50%;" />

- 三、cookie

  - cookie中文名称为小型文本文件，指某些网站为了辨别用户身份、进行会话跟踪而储存在用户本地终端上的数据。它弥补了http协议无状态性（就是因为互联网上网不用登录，于是就不知道这个用户是新用户还是老用户，没有用户的记录）的不足，有利于进行用户跟踪并提供针对性的服务，但也带来了一些安全问题。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232154721.png" alt="image-20221223215426327" style="zoom:50%;" />

###  第五节、Internet电子邮件

- 一、电子邮件系统结构

  - 电子邮件系统主要包括邮件服务器、简单邮件传输协议（SMTP）、用户代理和邮件读取协议等

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232154087.png" alt="image-20221223215449854" style="zoom:50%;" />

- 二、SMTP

  - -----SMTP是Internet电子邮件中核心应用层协议，实现邮件服务器之间或用户代理到邮件服务器之间的邮件传输。 SMTP使用传输层TCP实现可靠数据传输，端口号25。 
    -----SMTP通过3个阶段的应用层交互完成邮件的传输，分别是握手阶段、邮件传输阶段和关闭阶段。
    -----SMTP的基本交互方式是SMTP客户端发送命令，命令后面可能携带参数，SMTP服务器对命令进行应答。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232155276.png" alt="image-20221223215513957" style="zoom:50%;" />

- 三、电子邮件格式与MIME

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232155253.png" alt="image-20221223215538766" style="zoom:50%;" />

- 四、邮件读取协议

  - 1.第三版的邮局协议
    (Post Office Protocol-Version 3，POP3)
    2.互联网邮件访问协议
    (Internet Mail Access ProtocolIMAP)

    3.HTTP
###  第六节、FTP

-  文件传输协议

	- 在文件传输情况下，用户要传输的可能是一个非常大的文件，如果这个时候只用单一的连接，既传输控制命令又传输数据内容，假如数据开始传输了，客户端从服务器下载或者上传一个很大的文件，这个时候已经开始传输了，但是服务器想中断这个传输这个传输，那么就需要发送一个中断的指令，但是这个终端的指令必须等到传输完成后才能被传输到服务器，这个时候已经晚了，所以要将控制连接和数据连接分开来使用两种连接以便及时的操作与响应。<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232156870.png" alt="image-20221223215610438" style="zoom:50%;" />

###  第七节、P2P应用

- 用户规模大的时候，不单单只是服务器传输，每个用户端也会给别的用户端传输刚才从服务器获取到的数据，减少了客户端等待的时间（如果不p2p，第一百万个想要获取这些数据的用户就必须等前面一百万个人获取完才能轮到它）

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232156625.png" alt="image-20221223215642180" style="zoom:50%;" />

###  第八节、Socket编程基础

- 数据的传输可以调用传输层的网络服务，如何来调取就需要socket

  - Socket接口模型:
    网络应用进程通信时需要通过API接口请求底层协议的服务。可以创建数据报类型套接字SOCKDGRAM、流式套接字SOCK STREAM和原始套接字SOCK RAW

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232157267.png" alt="image-20221223215721029" style="zoom:50%;" />

- 基于TCP的socket编程

  - 服务端： TCP服务器要绑定一个固定的端口，绑定完以后就监听，等待用户的访问，如果有客户端向服务器发起请求，服务器接收这个连接之后才能开始进行数据传输（因为是基于TCP的连接，所以必须要建立连接才能进行数据的传输），服务器就等待客户机发送响应的数据然后接收客户机发来的数据（进入recv状态），客户机数据传完以后recv状态结束，然后对数据进行相应的处理，处理完毕使用send方法把数据响应信息发回客户端（叫做应答）；如果传输完成了就关闭这次的TCP连接【注意：只是断掉了这次的TCP连接，而不是和端口的TCP连接，它在这个监听端口上还可以监听其它客户机发来的请求，直到没有用户发来请求或者服务器需要关机了，才完全关闭这个端口，然后整个程序结束退出】
    ---客户端：  一开始不需要分配固定的端口，而是调用socket的接口，或者从操作系统获取一个临时的端口，它使用这个临时的端口和服务器建立连接，向服务器特定的监听端口发送连接，连接成功后向服务器发送请求数据，数据发送完以后等待接收服务器发送响应信息进入一个rece状态，当接收到信息后，对发送回来的数据进行处理，如果有必要会再次进入send状态，再调用接受数据，进行处理，等到所有数据都接收完成后就结束TCP连接，关闭这个端口

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232157349.png" alt="image-20221223215746975" style="zoom:50%;" />

- 基于UDP的socket编程

  - -----UDP相对于TCP更加简单一些，因为UDP不需要建立连接，但是UDP传输快，占用资源少，唯一不好的就是不可靠，会有数据丢失。
    -----服务器端：一开始也是获得一个固定端口，然后和服务器进行绑定（也就是bind），接下来不需要等待客户机和它进行连接，而直接可以等待接收客户机的数据（recvfrom），如果收到了就通过sendto方法返回响应的数据，如果还需要继续接收的话就要重新接收请求数据以及处理发送响应数据，如果整个过程完成了就关闭监听端口，结束。
    -----客户端：调用socket接口或者系统临时分配一个端口，不需要进行连接，直接向服务端发送请求数据，等待客户端响应数据返回后对数据进行接收和处理，还有需要的话就再次发送请求数据，等待然后接收数据、处理，最后关闭端口，结束进程。UDP和TCP相比就是少了响应的过程。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232158865.png" alt="image-20221223215831585" style="zoom:50%;" />

##                                              

##                                            第三章、传输层

是直接为应用层提供传输服务的，传输层主要就是解决应用层可靠传输的问题，怎样能够把数据可靠的传输过去，接收方怎样接收到可靠的数据

###  第一节、传输层的基本服务

- 一、传输层功能

  - 传输层的核心任务是为应用进程之间提供端到端的逻辑通信服务。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232158578.png" alt="image-20221223215857285" style="zoom:50%;" />

  - 主要功能：①传输层寻址：
  ②应用层的报文分段和重组：有时候发送数据量过大就要进行分段与重组以便于传输。
  ③报文的差错检测：传输过来的文件传输层会进行差错检测，看文件有没有丢失或者数据损坏。
  ④进程间的端到端可靠数据传输控制。
  ⑤面向应用层实现复用与分解：就是把传输过来的数据进行区分，区分它是要送到哪里的，然后找不同的快递公司把它给送出去。
  ⑥端到端的流量控制：发送端的速度可能很快然后接收端接受不过来，接收方后面的数据可能就丢掉了，所以要控制流量。
  ⑦拥塞控制

- 二、传输寻址与端口

  - 传输层负责的是应用进程的通信，网络层负责的是主机到主机的通信。所以对于传输层来说怎么找到应用的地址很重要。在传输的数据中会携带端口号，以便传输层区分它是给哪一个应用的

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232159639.png" alt="image-20221223215927144" style="zoom:33%;" />

-  三、无连接服务与面向连接服务

	-  1、UDP-----无连接服务-数据传输之前无需与对端进行任何信息交换（即”握手“），直接构造传输层报文段并向接收端发送。
2、TCP-----面向连接服务-在数据传输之前，需要双方交换一些控制信息，建立逻辑连接（可以确认对方空间是否充足等），然后再传输数据，数据传输结束后还需要再拆除连接。  

###  第二节、传输层的复用与分解

- 多路复用与多路分解：是传输层的一项基本功能，支持众多应用进程共用一个传输层协议，并能够将接收到的数据准确交付给不同的应用进程

  - 多路复用：传输层上有多个应用进程需要传输层，每一个应用进程都对应了一个端口，应用进程把要传输的数据放到端口排队，传输层就检查每一个端口，看哪个端口有数据了就把它取出来，然后进行封装，封装完以后给下边的网络层进行传输。

  - 多路分解：对于接收端来说，数据通过网络层不断传输到达了主机之后，就被传到了传输层，传输层就判断这个数据到底是给哪个应用进程的，【怎么判断呢？通过数据传输中携带的目的端口号】然后把数据放到相应的应用进程端口中，应用看到有数据就把它取出去。

  - 左复用，右分解

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232159299.png" alt="image-20221223215954002" style="zoom:50%;" />

- 一、无连接的多路复用与分解

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232202135.png" alt="image-20221223220235912" style="zoom:50%;" />

- 二、面向连接的多路复用与多路分解

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232203884.png" alt="image-20221223220308358" style="zoom:50%;" />

###  第三节、停——等协议与滑动窗口协议

-  一、可靠数据传输的基本原理

	-  实现可靠数据传输的措施：
1、差错检测：利用差错编码实现数据包传输过程中的比特差错检测。
2、确认：接收方向发送反馈接收状态，告诉传输方是确认无误还是确认有数据丢失。
3、重传：发送方重新发送接收方没有正确接收的数据
4、序号：确保数据按序提交，因为有时候数据没有丢失，只是在路上堵车了，如果不进行标识的话就会收到两份一样的数据，数据的传输时不允许重复的。
5、计时器：解决数据丢失问题，设定一个时间，先等一下，如果超过了时间数据还没收到就会被认为是丢失。

- 二、停——等协议

  - 简单来说就是和程序员工作一样，敲了一段代码，要检查并且验证，确定无误后再进行下一阶段

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232203630.png" alt="image-20221223220345085" style="zoom: 33%;" />

- 三、滑动窗口协议

  - 【停等协议相当于一个特殊的滑动窗口协议。】
    1.停-等协议的主要性能问题
    停止-等待机制降低了信道利用率。
    2.解决方法:
    流水线协议或管道协议--允许发送方在没有收到确认前连续发送多个分组。
    3.流水线协议的改进:增加分组序号范围;
    发送方和(或)接收方必须缓存多个分组。
    4.典型的流水线协议:滑动窗口协议

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232204003.png" alt="image-20221223220417483" style="zoom:50%;" />

    * 两种最具有代表性的滑动窗口协议:
      1.回退N步(Go-Back-N，GBN)协议:
      发送端窗口大小较大，可以在未得到确认前连续发送多个分组，但接收窗口大小仅为1，只能接收1个按序到达的分组，未按序到达的分组或者某个分组差错，就会引起发送方重发该分组及其之后的所有分组。
      2.选择重传(Selective Repeat，SR)协议:
      增加接收方缓存能力(接收窗口>1)，缓存正确到达但失序的分组，仅要求发送方重传未被接收方确认的分组，等缺失分组到达后一并向上层按序提交。

###  第四节、用户数据报协议（UDP）

- 用户数据报协议UDP是传输层协议，提供无连接、不可靠、数据报尽力传输服务。

  * UDP数据报结构：

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232205048.png" alt="image-20221223220507663" style="zoom:50%;" />

###  第五节、传输控制协议（TCP）

- 一、TCP报文段结构

  - -----源端口描述了发送方的端口号，目的端口描述了接收方的端口号。
    -----序号表示的是这个TCP报文在整个应用报文中的序号（大数据拆成段发送，以便接收完之后可以拼接成大数据）
    -----确认号：发送数据之后对方返回的确认信息，确认哪个编号的数据已经收到了。
    -----数据偏移：TCP在传输过程中被拆分又拆分，利用数据偏移表示数据被二次拆分后的在第一次被拆分的位置。
    -----保留字段：以后可能会使用
    -----URG：紧急指针，当特殊情况下当值为1有效，值为0无效。
    -----ACK：确认位，ACK为1表示携带了确认信息，确认号有效。
    -----PSH：通知TCP协议把数据进行提交。
    -----RST：复位，TCP连接异常通知对方进行重新连接。
    -----SYN：同步请求，建立连接一方向另一方发出的请求，双方要协商一个起始数据。
    -----FIN：双方通信结束之后拆除连接，当FIN为1，通知对方拆除连接。
    -----窗口：告诉对方现在的接收窗口有多大，缓存有多大，用来进行流量控制，这个窗口大小可以变。
    -----校验和：TCP也要对数据进行校验。
    -----填充：保证TCP首部大小是四字节的倍数，TCP首部大小固定部分一共20个字节大小。
    -----再下面就是TCP数据。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232205363.png" alt="image-20221223220550086" style="zoom:50%;" />

- 二、TCP连接管理

  - 建立连接--三次握手

    - 1、SYN连接请求：同步请求，对方接受到请求后返回一个信息。
      2、SYNACK确认：同步确认，里面既包含了一个同步SNY请求还包含了一个确认信息。
      3、ACK确认：由客户端再进行最后一次确认。

      - -----seq是序列号，a要通知b它的一个初始序号a给b通知的是x，b给a通知返回的是y；
        -----ack=x+1代表服务器告诉客户端，你可以开始发x+1的数据了，意思就是你的x序号我已经收到了。
        -----ack=y+1代表a告诉b，你刚才发的编号是y的数据我已经收到了，接下来你需要给我发的数据是y+1的数据。

        <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232206733.png" alt="image-20221223220618436" style="zoom:50%;" />

  - TCP断开连接的过程-----四次挥手

    - 一直连接使用不释放的话就会占用资源。
      -----数据传送完了，有一方想断开连接，任意一方都可以先发出请求，三次握手只能由客户端发起请求。
      -----一方发送TCP报文，FIN的值为1，假如seq序号已经到了u（序号是必须携带的）。
      -----A发送FIN为1后不再传输数据，这个断开是单面的，B要是还有数据要传送给A的话，还是可以继续传输的，此时是半断开状态。等到B的数据完全发送完给A之后，B再发送一个FIN=1的连接释放请求，表示告诉A我的数据发送完了，可以释放了。
      -----A接收到B的FIN=1之后发送一个ACK=1确认，发送完之后，A不会立即关闭，还会进入TIME-WAIT阶段再等一会，而B在接收到A的ACK=1确认之后就会立马关闭。
      -----总体来看两个子阶段：一是半关闭状态，二是再关闭，每两次握手就关闭一半

      <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232206356.png" alt="image-20221223220658100" style="zoom:50%;" />

-  三、TCP可靠数据传输

	-  1、TCP的可靠数据传输实现机制包括差错编码、确认、序号、重传、计时器等。
	-  2、TCP的可靠数据传输是基于滑动窗口协议，但是发送窗口大小动态变化。
①封装TCP报文。
②发出一个报文段后启动一个计时器：通过计时器判断是否需要重传。
③通过校验和发现数据差错。
④通过序号重新排序，丢弃重复的报文段：重复的报文段就是因为堵车到达慢，服务器以为没有送达然后重新传的数据。
⑤流量控制：通过窗口进行流量控制

-  四、TCP流量控制

	-  1、TCP协议利用窗口机制实现流量控制，但不是简单的滑动窗口协议。
2、TCP连接建立时，双方都为之分配了固定大小的缓冲空间；TCP的接收端只允许另一端发送其缓冲区所能接纳的数据。
（1）接收端在给发送端发送确认段时，通告接收窗口大小。
（2）发送端在接下来发送数据时，确保未确认段的应用层数据总量不超过接收端通告的接收窗口大小，从而确保接收端不会发生缓存溢出。【就是双方先协商好，然后按照协商的内容进行发送】

-  四、TCP拥塞控制

	- 1、窗口机制：通过调节窗口的大小实现对发送数据速率的调整。
2、窗口调整的基本策略：AIMD（Additive Increase，Multiplicative Decrease）---加性增加，乘性减小 ；网络未发生拥堵时，逐渐”加性“增大窗口大小，当网络拥堵时，”乘性“快速减小窗口大小。【发送确认信息，如果确认信息很快返回说明网络可以，然后慢慢加大窗口【慢启动】，如果信息返回的慢，就倍数减小，比如减小1.5倍这样子，可以避免网络拥堵】
3、TCP的拥塞控制算法：包括了慢启动、拥塞避免、快速重传和快速修复4部分。

##                                           

##                                        第四章、网络层

###  第一节、网络层服务

- 网络层的主要作用是将网络层数据报从源主机送达目的主机。主要功能包括：
1、转发：分组从输入接口转移到输出接口；
2、路由选择：决定分组经过的路由或路径。

	- 转发表：记录了输入端口数据进来以后去目的地走哪条路出去；转发表怎么知道呢?通过路由选择协议，这是一个负责选路的协议，路由选择协议通过确定一个路由表形成一个转发表，根据转发表就可以进行数据的传输选路。
	
	  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232207130.png" alt="image-20221223220749706" style="zoom:50%;" />

###  第二节、数据报网络与虚电路网络

-  一、数据报网络

	-  数据报网络：按照目的主机地址进行路由选择的网络。
特点：
1、无连接。【所以数据报网络是不可靠的，但是效率高】
2、每个分组作为一个独立的数据报进行传送，路径也能不同。
3、分组可能出现乱序和丢失。【每个分组独立选择线路，有时候先出发的可能选了一条不怎么好的路，遇到堵塞，就会换一条路走，先出发的可能会后到达，于是出现乱序。堵车严重的甚至会不到达】

-  二、虚电路网络

	-  虚电路网络在网络层提供面向连接的分组交换服务。
特点：
1、建立一条网络层逻辑连接。
2、不需要为每条虚电路分配独享资源（区别于电路交换）
3、根据虚电路号沿虚电路路径按序发送分组。

###  第三节、网络互连与网络互连设备

- 一、异构网络互连

  -  异构网络：两个网络的通信技术和运行的协议不同。
  异构网络互连的基本策略：
  1、协议互转（类似于一个翻译）
  2、构建虚拟互联网络

  	- 在IP层，大家都共同接受IP协议，所以在IP协议层面就构建了一个虚拟的互联网络。
  	
  	  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232208398.png" alt="image-20221223220820027" style="zoom:50%;" />

- 二、路由器

  - 通过交换结构，路由器把不同类型的网络连接在一起。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232208608.png" alt="image-20221223220845447" style="zoom:50%;" />

  - -----基于内存的交换：端口输入放到内存，输出端口从内存中取出，完成数据的交换。
    -----基于总线交换：数据输入传到总线上，沿着总线传输到达输出端口再输出。
    -----基于网络交换：输入端口和输出端口通过交叉的网络连接组成一个网状结构，网中有很多交叉点，交叉点上有开关，无数据传输的时候开关是【打开】的，电路就不连通。当有数据传输的时候，开关【关闭】，线路接通。
    -----所有这些操作都基于路由器的处理器。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232209222.png" alt="image-20221223220909920" style="zoom:50%;" />

###  第四节、网络层拥塞控制

-  拥塞：一种持续过载的网络状态，此时用户对网络资源（包括链路带宽、存储空间和处理器能力等）的总需求超过了网络固有的容量。
原因：
1、缓冲区容量有限。
2、传输线路的带宽有限；
3、网络节点的处理能力有限；
4、网络中某些部分发生了故障。
- 控制方法一：流量路由感知

	- 流量感知路由：根据网络负载动态调整，将网络流量引导到不同的链路上，均衡网路负载，从而延缓或避免拥塞发生。
解决网络负载的振荡现象：
1、多路径路由：流量分散到多条路径。
2、缓慢转移流量至另一链路：如果发现一条路没有拥堵然后大量转移，就会造成该路段的拥堵。

-  控制方法二：准入控制

	-  准入控制：是一种广泛应用于虚电路网络的拥塞预防技术。
基本思想：
对新建虚拟电路进行审核，如果新娘间的虚电路会导致网络变得拥塞，那么网络拒绝建立该新虚电路。
拥塞状况的量化：基于平均流量瞬时流量。

- 控制方法三：流量调节

	-  1、感知拥塞
2、处理拥塞;将拥塞信息通知到其上游结点。
处理方法：
（1）抑制分组：给拥塞数据报的源主机返回一个抑制分组。
（2）背压：让抑制分组在从拥塞结点到源结点的路径上的每一跳，都发挥抑制作用。

- 控制方法四：负载脱落

	-  负载脱落：路由器主动丢弃某些数据报。
如何选择丢弃的数据报？
1、丢弃新分组：如GBN
2、丢弃老分组：如实时视频流

###  第五节、Internet网络层

- 一、IPV4协议

  -  IP数据报格式

  	-  -----虽然固定字段是20字节，但是可变长度字节长度是没有限制的。
  -----区分服务：目的是让IPV4协议在工作中对不同的服务提供不同的服务区分。
  -----标识：识别每一个IP报。
  -----标志：判断IP报是否被进行分割。
  -----片偏移：判断IP报分割了之后具体处于哪个位置。
  -----生存时间：IP报出错后可能会逻辑错误跑来跑去，就是不到终点，所以需要设置一个生存时间，如果超过这个时间，IP报就会被丢掉。
  -----协议：标识后面数据部分是哪个协议的数据，然后把数据交到不同的地方进行处理，因为不同的层有不同的协议。
  -----首部校验和：避免首部在传输过程中出现错误。首部一旦发生错误，后面的也会发生错误。
  -----源地址：指发送这个数据的主机IP地址。
  -----目的地址：最后接收这个数据的主机的IP地址。【因为是IPV4协议，所以在这里面的地址都是占4个字节，也就是占32位】
  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232209603.png" alt="image-20221223220946341" style="zoom:50%;" />

  -  IP数据报分片

  	- 标识、标志、位偏移的作用是传输到数据链路层以后把数据重新进行组装。
  	
  	  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232210321.png" alt="image-20221223221010940" style="zoom:50%;" />

- 二、IPV4编址

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232210151.png" alt="image-20221223221035745" style="zoom:50%;" />

  - ABC三类都是拨给主机使用的，A类网络规模比较大，B的一般，C比较小。
    -----net-id:网络号表示这个机子的网络所在编号，在同一个网络上的机子必须具有相同的网络号。
    -----host-id：主机号要有区分，不会相同。
    -----可以通过net-id的前几位确定是哪一类的网络。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232211228.png" alt="image-20221223221110814" style="zoom:50%;" />

  - -----子网划分：将一个较大的子网划分为多个较小子网的过程。通过子网掩码指定网络前缀进行划分，较大子网具有较短的网络前缀，较小子网具有稍长的前缀。
    -----超网：这些C类网络都很小，如果想建一个大的网络，就可以用到超网聚合的方法，将具有较长前缀的相对较小的子网合并为一个具有稍短前缀的相对较大的子网。
    -----子网掩码：32位，前半部分全1，后半部分全0，用来定义一个子网的网络前缀长度以此。

    - <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232211936.png" alt="image-20221223221138342" style="zoom: 50%;" />

    - ”与“运算，IP与子网掩码（mask）得到子网地址（subnet）

      <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232212920.png" alt="image-20221223221206716" style="zoom: 50%;" />

    - 最小的是子网地址，最大的是直接广播地址，在这两个之间的就是地址范围。<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232214345.png" alt="image-20221223221458147" style="zoom: 50%;" />

    -  子网划分：延长一位子网掩码或者利用与运算去做。<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232219389.png" alt="image-20221223221928159" style="zoom: 50%;" />

  - 首先最长前缀匹配，如果有等多个前缀匹配的话就用与运算（IP地址与子网掩码进行与运算），大大减少查表的次数，从而提高效率

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232220190.png" alt="image-20221223222024767" style="zoom: 50%;" />

- 三、动态主机配置协议

  - 要给每一台主机分配IP地址，人工来做太繁杂，于是有了DHCP， 在网络内需要有一台DHIP服务器，你需要告诉DHIP服务器，可以分配的IP地址范围是多少到多少，然后它就等其它客户机发请求，给客户机发一个可使用的IP地址。
    -----DHCP服务器发现：在服务网络内广播一个信息，说谁是DHCP，是不是能给我提供服务。
    -----DHCP服务器提供：DHCP服务器接收到这个广播后返回一个DHCP提供的信息，说我是DHCP服务器，我可以给你提供什么样的IP地址。
    -----DHCP服务器请求：客户机可能会接收到多个DHCP服务器发来的提供信息，客户机就会选一个，然后给那个对应的DHCP服务器发送请求，我选了你的这个，给我提供IP地址。
    -----DHCP确认：服务器接收到后做一个确认，客户机就自动获得了一个IP。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232315347.png" alt="image-20221223231515237" style="zoom: 80%;" />

- 四、网络地址转换

  - 为什么要进行网络地址的转换？因为现实中由于IP地址不够用，所以大量网络使用的是保留IP地址,而在互联网上是不能使用保留地址进行通行的。所以需要网络地址转换，作用是使私有地址（保留地址）的计算机可以访问互联网。基本思想是当你发送一个数据到互联网的时候，原地址当中携带的是你自己的私有地址或者是保留地址，这个地址在互联网上是不能使用的，当你到互联网上的时候，由我们所在网络的路由器（就是NAT路由器）把你的原IP地址换掉，换成一个互联网上可以使用的，合法的IP地址，然后再把这个数据报传输到互联网上，将来对方给你响应的时候，返回的信息是按照我们替换掉的那个IP地址返回的，这个地址会送到NAT路由器那里，再由路由器把这个地址换掉，换成你真实的内部私有地址，然后再发送给你。这样还可以隐藏真实的内部地址，因为你访问互联网使用的是合法的公共IP地址，即使有人截获到你的数据，也无法判断你的真实地址。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232315521.png" alt="image-20221223231555466" style="zoom:80%;" />

-  五、互联网控制报文协议ICMP

	- 互联网控制报文协议：网络层当中除了IP协议之外，还有几个服务协议，是辅助的。
-----作用：在主机或路由器间，实现差错信息报告，因为网络上会有一些差错发生，对于这些差错要进行及时的通知，它还有一些信息询问的功能。
-----ICMP差错报告报文共五种：终点不可达（终点去不了，路由表查不到）、原点抑制（进行拥塞控制）、时间超时、参数问题和路由重定向等。
-----ICMP询问报文：回声（echo）请求/应答【这个用来检测网络的连通性，比如说我们在网络上经常使用的ping命令，可以测试从源主机到目的主机之间通不通，就是发送一个ICMP回声请求报文，如果对方收到以后，会把这个报文原样返回，如果收到返回的数据就可以知道这个网络是连通的】、时间戳（timestamp）请求/应答

-  六、IPV6

	-  1、解决IPV4地址耗尽的问题
2、IPV6报文首部长度固定40字节
3、IPV6地址长度128位
4、IPV4到IPV6的迁移
5、双协议栈：4和6都能支持
6、隧道：用隧道技术连接IPV4和IPV6

###  第六节、路由算法与路由协议  

- 一、链路状态路由选择算法

  - -----路由器主要作用：分组转发、路由选择
    -----链路状态路由选择算法是一种全局式路由选择算法。每个路由器通过从其它路由器获得的链路状态信息构建出整个网络的拓扑图。

  - 计算最短路径---Dijkstra算法（在网络拓扑图中不断筛选，扩大集合，选择最短路径）

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232222532.png" alt="image-20221223222231303" style="zoom:50%;" />

- 二、距离向量路由选择算法

  - 每个结点基于其与邻居节点间的直接链路距离，以及邻居交换过来的距离向量，计算并更新其到达每个目的结点的最短距离，然后将新的距离向量再通告给其所有邻居，直到距离向量不再改变。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232222208.png" alt="image-20221223222255039" style="zoom:50%;" />

- 三、层次化路由选择

  - 实现大规模网络路由最有效的、可行的解决方案。 
    -----划分自治系统：
    网关路由器
    自治系统间路由协议：网关之间执行自治系统之间的路由协议，所以路由层次化，一个是自治系统间的，一个是自治系统内的。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232223239.png" alt="image-20221223222318082" style="zoom:50%;" />

-  四、Internet路由选择协议

	-  1、内部网关协议：在同一个内部自治系统使用，但是算法不一样。
（1）RIP[路由信息协议]：基于距离向量路由选择算法，跳数作为距离度量，为了保证快速收敛，最大距离不超过15跳，每30秒交换一次距离向量。如果是16，就意味着无穷远，不可达。适合规模小一些的。
（2）OSPF[开放最短路径优先协议]:基于链路状态路由选择算法。适合规模大一些的
2、外部网关协议：是自治系统间使用的协议，比如BGP

##                  

##                                   第五章、数据链路层与局域

链路层的任务是把数据可靠的从一个节点传输到另一个节点，是为网络层提供服务的

### 第一节、数据链路层服务

- -----链路：通信链路连接的相邻节点的通信信道。
  -----链路层数据单元：帧
  数据链路层的基本工作过程：数据链路层从网络层接收数据报，网络层封装好数据报以后交给链路层进行发送，链路层拿到数据报以后要添加自己的帧头和帧尾，构造成一个数据帧，然后发送给接收节点，接收节点通过帧头的信息进行接收和处理，处理完以后把里面的数据报取出来交给接收节点的网络层，由网络层做进一步的处理。

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232224889.png" alt="image-20221223222406820" style="zoom:50%;" />

- 主要功能包括：
1、组帧：数据链路层拿到数据以后加上帧头加上帧尾。
2、链路接入：主要有点对点链路(一条链路上就两个点)、广播链路（一条链路上有多个点），针对不同的链路会有不同的方法
3、可靠交付（可靠传输方法多用于高出错率链路）
4、差错控制

###  第二节、差错控制

-  一、差错控制的基本方式

	-  差错控制的四种基本方式：
1、检错重发：如果接收节点接收到的数据有错的话，就需要发送节点重新发送。 
2、前向纠错：不需要发送方重新发送，接收方接收到数据知道哪里出错并进行相应的纠错
【即接收端进行差错纠正】。
3、反馈校验：接收端将收到的数据原封不动发回发送端，发送端来看接收方收到的信息是不是和发出去的一样。
4、检错丢弃：检查发现错误，接收方不做任何处理就丢弃，给传输层管，传输层发现没有收到数据以后就通知发送端重新发送。

- 二、差错编码的基本原理

  - 香农信道编码原理：理论上可以通过编码使得数据传输过程不发生错误，或者将错误概率控制在很小的数值之下。数据链路层接收到要发送的数据D后，采用特定的编码方法，比如说f，通过f函数对数据D进行运算以后得到一个差错编码值R，然后把差错编码和原来的数据连在一起，通过信道进行传输，在传输过程中，如果发生了错误，那么数据或者是编码就会变化，至于接收到的数据到底有没有发生变化，我们就需要做进一步的检测，接收方接收到数据以后就把数据取出来，仍然对数据进行计算，得到一个计算出的差错编码，然后拿收到的差错编码和计算出来的编码做一个对比，看是否一致，如果一样说明数据正确，就把数据提交到更高层次的地方进行处理，如果不一致就说明出错了，接下来就进行出错的处理

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232224942.png" alt="image-20221223222436897" style="zoom:50%;" />

-  三、差错编码的检错能力与纠错能力

	-  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232224666.png" alt="image-20221223222455575" style="zoom: 80%;" />

- 四、典型的差错编码

	-  1、奇偶校验码：
奇校验：编码后的码字中“1“的个数为奇数。
偶校验：编码后的码字中”1“的个数为偶数。
比如是101那么奇校验就加多一个校验位，编程1011，这个时候1的个数就是3，校验位就可以取1。偶校验：还是101，要增加的校验位就是0，变成1010，使得1的个数是偶数，如果传输过程中0变成了1或者1变成了0，那么1的个数的奇偶就发.生了变化，就可以认为出错了，奇偶校验码不能进行纠正。
2、汉明码
可以实现单个比特差错纠正。
3、循环冗余码CRC：
检错能力强，编码效率高，实现简单，被广泛使用。

###  第三节、多路访问控制协议

- 对于链路层来说，它的主要功能是进行差错检测，主要的手段是差错编码，另外一个主要的功能就是让节点可以访问电路，发送它的数据，这个就叫做访问控制，由于线路有的属于广播型的电路，多个节点都在这条链路上进行发送（也就是多路访问），在这种情况下，我们就需要谁什么时候可以使用线路，需要进行一个控制，这是电路层它特有的一个很重要的功能。
-  一、信道划分MAC（多路访问控制）协议

	- 通常来说，需要进行多路访问控制的都是广播链路，在这条链路上有很多个节点，其中任何一个节点发出的信号其他节点都能够收到，那么这样会带来一个什么样的一个影响呢？就是你发送出来的信号，会传递到别人那里，如果另外一个人也发送他自己的信号，你的信号和他的信号，就会产生互相的干扰，叫做碰撞或者冲突。这种干扰会导致接收方无法识别原来的信号，导致数据的发送失败，在这种情况下，我们对于广播型的链路上哪个节点可以使用链路，需要进行一些控制，以减少碰撞或者说当碰撞发生之后有办法去解决，可以使接收方最终能够收到有效的数据。而点对点的没有那么多个节点共同使用链路，这个点发出的数据那个点收，所以以便没有多路控制的问题
	- -----多路访问控制MAC：
广播信道上用于协调各个节点的数据发送。
-----信道划分MAC协议：【类似于大马路上很多车，划分车道，一车一道，这样不会乱】
1、频分多路复用：在频域内将信道带划分为多个子信号。【按照信道的频率，整个信道的频率的宽度，有这么宽，那么划分成多个子频道，这条呢，就这么宽，另外一条呢这么宽，还有一条呢，这么宽，那么每一个子信道的分配给一路信号进行传输，可以在这条比较宽的信道上同时传输多路信号，这个叫做频分多路复用，就是在频域内，将信道的带宽划分为多个子信道，每个子信道上传输一路信号】
2、时分多路复用：将通信信道的传输信号在时分多路。【它不是把频率划分成多个信道，因为线路的带宽可能没有那么宽，不适合划分，这个时候就可以把使用时间进行划分，这段时间它使用，下个时间另一个使用，把这个整个信道的这个使用时间划分成多个等长的时隙，就是很小的时间段，将来给每一路信号分配它的使用时隙，在这个时隙内你可以传输，下一个时隙 他可以传输，频分多路复用和时分多路复用是最常用的两种】
3、波分多路复用：在一根光纤中，传输多路不同波长的光信号。【主要针对光纤，一个波长一个信号】
4、码分多路复用：从编码域进行划分，使得编码后的信号在同一信道中混合传输。

- 二、随机访问MAC协议

  - 1、ALOHA协议
    纯ALOHA：直接发送--》信道侦听(听取返回信息，看是否发送成功)--》冲突重发
    时隙ALOHA：时隙开始时发送---》信道侦听---》冲突则下一时隙以概率P重发
    2、载波监听多路访问协议CSMA
    *发送前监听信道是否空闲*
     （1）非坚持CSMA：忙则等待随机时间后再侦听

     （2）1-坚持CSMA：忙则持续侦听（此类型信道利用率高，但是如果两个人都在侦听，两个一起发，然后失败，那反倒会利用率低）
     （3）P-坚持CSMA：忙则概率P在最近时隙发送
    3、带冲突检测的载波监听多路访问协议CSMA/CD监听空闲后发送，发送时检测碰撞，碰撞后等待重发。【CD就是冲突检测】

-  三、受控接入MAC协议

	-  1、集中式控制
由一个主机负责调度其它通信站接入信道，从而避免冲突。
主要方法：轮询技术，又分为轮叫轮询和传递轮询
2、分散式控制（没有集中主机调度）
典型方法：令牌技术，如令牌环网

###  第四节、局域网

- 一、数据链路层寻址与ARP

	-  1、MAC地址
每个接口对应一个MAC地址，且全球唯一；长度48位。【我们要构建一个局域网的时候，很多情况下采用的是广播的方式，广播出来的信号每一个节点都能收到，但是实际上这个数据，只是传输给其中的某一个节点，那么其他收到这个数据的这些节点，它就不应该处理这个东西，怎么让其他节点知道这个数据是给某个特定节点的？在应用层有域名，传输层有端口号，网络层有IP地址，在链路层用MAC地址也就是硬件地址，前20位是厂商地址代码，剩下的的24位是分配的码】
2、地址解析协议（ARP）
根据本网内目的主机或默认网关的IP地址获取其MAC地址；以查询/响应的方式【以广播的方式发出，等对方应答，前提是必须处在一个广播范围内】

-  二、以太网

	-  1、以太网是以IEEE802.3标准命名的一种网络。
2、采用CSMA/CD访问控制方法（以太网要监听信道是否空闲，发送是否冲突，判断是否冲突由网卡判断，所以以太网网卡很重要的就是采用CSMA/CD访问控制方法）
3、以太网技术
（1）10Base-5，10Base-T【10是数据传输率，10兆，base是采用基带传输的方法，5是指单段电缆最大传输距离是五百米，使用的是同轴电缆，T使用的是双绞线】
（2）快速以太网100Base-TX，100Base-T4，100Base-FX【F代表使用的是光纤】
（3）千兆以太网
（4）万兆以太网

-  三、交换机

	-  *以太网技术改进，于是出现了交换机，以太网使用总线或者星型结构的集线器，冲突不可避免*
1、转发与过滤：
-----可以依据接收到的链路层帧的目的MAC地址，选择性的转发到相应的端口。【改变了原来广播的方式】
-----以目的MAC地址为主键，查找交换表。【一个交换机有四个端口，每个端口连接一个计算机，假如A要和B进行通信，信号从1端口进入交换机，交换机进行转发的判断以后，根据B的MAC地址判断到这个信号要去的是B计算机，信号从2端口出来传送给B，数据就不会去到C或者是D的端口，C想传数据给D也可以，计算机之间就不会相互干扰以产生冲突碰撞，交换机怎么知道信号要传到哪里去，就要靠查表，查交换机内的交换表，和路由器的路由表类似】
2、自学习
交换机通过自学习构建交换表。
3、优点
（1)消除冲突，提高性能
（2）支持异质链路
（3）易于进行网络管理
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232226248.png" alt="image-20221223222617108" style="zoom:50%;" />

-  四、虚拟局域网（VLAN）

	-  1、一种基于交换机（支持VLAN功能）的逻辑分割广播域的局域网应用形式。【vlan的作用就是可以对网络进行一个划分，为什么要对网络进行划分？因为很多交换机，连接成一个网络以后，这个由交换机组成的网络，所有的计算机之间都能够直接进行通信，为什么直接能够进行通信？是因为每个计算机，它如果要和另外一个计算机通信的话，它知道对方的MAC地址，怎么知道的？它要发一个ARP的广播，交换机对于广播信息要向所有端口进行转发，所以有一台计算机，如果要发一个ARP广播的话，网络内的所有计算机经过交换机转发之后都能收到，收到以后，收到这个广播的计算机，就能进行响应，所以响应信息回来以后，就知道了对方的硬件地址，然后就能给对方发送信息，所以在这个由交换机构成的网络当中，所有计算机都能够进行直接的访问】
2、不受物理位置的限制，以软件的方式划分和管理局域网中的工作组。【通过划分虚拟局域网的方式做到，每一个虚拟局域网就是一个广播域，不同广播域之间不能访问】
3、能够一直广播风暴。
4、划分方法：基于交换机端口
基于MAC地址
基于上层协议类型或地址 
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232226475.png" alt="image-20221223222649294" style="zoom:50%;" />

###  第五节、点对点链路协议

-  一、点对点协议（PPP）

	-  能够处理差错检测、支持多种上层协议、允许连接时协商IP地址、允许身份认证
典型应用：拨号上网
功能：1、成帧
2、链路控制协议LCP
3、网络控制协议NCP

-  二、HDLC协议

	-  高级数据链路控制-------HDLC协议
-----可应用于点对点链路和点对多点链路。
-----帧定界：帧的定界符是01111110【发的都是二进制，怎么判断哪个是哪个，类似于标点符号，标一个符号就知道这是一句，头放一个，尾放一个就完成了定界】
-----如果数据中出现了01111110又如何完成定界？
  位填充：也叫做透明传输
发送端：只要发现数据字段5个连续的1，就立即插入一个0，保证数据字段不会连续出现6个1。
接收端：发现数据流中5个连续的1，删除其后的0，还原成原来的信息。
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232227744.png" alt="image-20221223222724541" style="zoom:50%;" />

##      

##                                          第六章、物理层

###  第一节、数据通信基础

- 一、数据通信基本概念

	-  1.消息;人类能够感知的描述称为消息。
2.信息;信息是对事物状态或存在方式的不确定性表述，信息是可以度量的。
3.通信:本质就是在一点精确或近似地再生另一点的信息。【传输过去再还原回来】
4.通信系统:能够实现通信功能的各种技术、设备和方法的总体。
5.信号:通信系统中，在传输通道中传播的信息的载体。
6、数据：对客观事物的性质状态以及相互关系等进行记载的符号及其组合。
7、信道：信道是以传输介质为基础的信号通道。

-  二、数据通信系统模型

	-  1、通信系统的构成
-----信源：产生数据和要把数据进行发送的。
-----发送设备：对数据进行编码、调制，转换成特定形式的信号。
-----信道：传输道路。
-----接收设备：解调、解码，把数据还原。
-----信宿：接收数据和信号的。
-----噪声源等部分：噪声源可能会让数据损坏，可靠性受到影响。
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232228659.png" alt="image-20221223222849572" style="zoom:50%;" />
	-  2、模拟通信：图a
传输的是模拟信号，模拟信号：信号的因变量是连续的
3、数字通信：图b
传输的是数字信号，数字信号：因变量是离散的
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232229239.png" alt="image-20221223222907098" style="zoom: 50%;" />
	-  4、数据通信方式
（1）单向通信、双向交替通信和双向同时通信。【-----单向通信：也叫单工，只有我发出你接收的情况，不存在你发给我接，只是单方面的，典型的有网络上的广播。
--双向交替通信：也叫半双工，就是我给你，你给我，但是不是同时进行，你给我和我给你有一个先后之分。
--双向同时通信：全双工】
（2）并行通信和串行通信。【同时多种通信在进行就是并行通信，发完一个再传一个再传一个就是串行通信。】
（3）异步通信和同步通信。
	-  5、数据通信系统的功能
①信道利用
②接口及信号产生
③同步：发一个就接一个
④差错检测和纠正
⑤寻址与路由
⑥网络管理
⑦安全保证

###  第二节、物理介质

-  一、导引型传输介质（有线的）

	- 1.架空明线
架空明线是指平行且相互分离或绝缘的架空裸线线路，通常釆用铜线或铝线等金属导线。
2.双绞线
两根相互绝缘的铜线并排绞合在一起，减少对相邻导线的电磁干扰。双绞线分为STP和UTP两种。
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232229296.png" alt="image-20221223222931176" style="zoom: 67%;" />
3.同轴电缆
抗电磁干扰性能好。
现在主要用于频带传输，如有线电视。
4.光纤
基本原理是利用光的全反射，前面说的三种传输的都是电磁信号，它传的是光信号。
通信容量大、距离远、抗电磁干扰性能好、保密性好。
分为多模光纤和单模光纤（性能更好）。

-  二、非导引型传输介质（无线的）

	-  1.地波传播
低频信号，沿地球表面传播；比如广播信号。
2.天波传播
较高频信号，利用电离层的反射传播。
3.视线传播
高频信号，点对点直线传播，中继传输。高频信号只能直线传播，不能有遮挡。

###  第三节、信道与信道容量

- 一、信道分类与模型

  - -----狭义信道:信号传输介质。
    ----- 广义信道:信号传输介质和通信系统的一些变换装置。
    1.调制信道:信号从调制器的输出端传输到解调器的输入端经过的部分【调制器到解调器之间这部分】。
    2.编码信道:数字信号由编码器输出端传输到译码器输入端经过的部分。【编码器到译码器之间这部分】

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232230091.png" alt="image-20221223223003929" style="zoom: 50%;" />

-  二、信道传输特性

	-  1.恒参信道:各种有线信道和部分无线信道，传输特性变化小、缓慢，如微波视线传播链路和卫星链路等。
    (1)对信号幅值产生固定的衰减;
    (2)对信号输出产生固定的时延。
2.随参信道:传输特性随时间随机快速变化。
    (1)信号的传输衰减随时间随机变化;
    (2)信号的传输时延随时间随机变化;
    (3)存在多径传播现象。

-  三、信道容量

	- 信道容量是指信道无差错传输信息的最大平均信息速率。
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232230557.png" alt="image-20221223223047271" style="zoom: 67%;" />

###  第四节、基带传输

-  一、基带传输基本概念

	-  -----模拟基带信号:模拟信源发出的原始电信号。
-----数字基带信号:数字信源发出的基带信号。
-----模拟基带信号可以通过信源编码转换为数字基带信号。
-----基带传输:直接在信道中传送基带信号。图为数字基带传输系统
<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232231933.png" alt="image-20221223223112829" style="zoom:67%;" />

- 二、数字基带传输编码

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232231536.png" alt="image-20221223223135330" style="zoom:50%;" />

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232232562.png" alt="image-20221223223210396" style="zoom:50%;" />

  - 基带传输码型:
    1.AMI码-----信号交替反转码
    零电平编码二进制信息0，二进制信息1(传号)则交替用正电平和负电平表示。

    2.双相码--曼彻斯特码
    正(高)电平跳到负(低)电平表示1，负电平跳到正电平表示0。

    3.米勒码 

    4.CMI码 

    5.nBmB码 

    6.nBmT码

###  第五节、频带传输

- 一、频带传输基本概念

  1.数字调制
  利用数字基带信号控制载波信号的某些特征参量，使载波信号的这些参量的变化反映数字基带信号的信息，进而将数字基带信号变换为数字通带信号的过程。
  2.键控法
  利用两种不同的幅值、频率或相位来分别表示0或1。

- 二、频带传输中的三种调制方式

  1.二进制数字调制
      (1)二进制幅移键控
      (2)二进制频移键控
      (3)二进制相移键控
      (4)二进制差分相移键控
  2.多进制数字调制
  3.正交幅值调制QAM

  - 1的时候传播，0的时候不传播

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232232394.png" alt="image-20221223223242104" style="zoom:50%;" />

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232233517.png" alt="image-20221223223305109" style="zoom:50%;" />

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232233392.png" alt="image-20221223223326097" style="zoom: 50%;" />

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232233914.png" alt="image-20221223223359702" style="zoom:50%;" />

###  第六节、物理层接口规程

-  一、物理层接口概述

	-  -----物理层接口的四大特性，分别为
①机械特性：尺寸、规格、大小、材质等
②电气特性：电压等
③功能特性：在一个接口上有很多信号线。信号线有不同功能，这个是发送的，那个是接收的。
④规程特性：相当于协议，先发送什么信号再发送什么信号等
-----物理层接口规范定义DTE和DCE之间的接口特性。
DTE:数据终端设备，进行数据处理的设备，比如电脑路由器。
DCE:数据电路端接设备，本身不对数据处理，把数据变成信号传播，比如调制解调器

-  二、物理层接口特性

	-  1.机械特性
通信实体间硬件连接接口的机械特点。
2.电气特性
在物理连接上，导线的电气连接及有关电路的特性。
3.功能特性
物理接口各条信号线的用途。
4.规程特性
通信协议，指明利用接口传输比特流的全过程，以及各项用于传输的事件发生的合法顺序。

##                        

##                               第七章、无线与移动网络

###  第一节、无线网络

- 一、无线网络基本结构

  1、无线主机
  2、无线链路
  3、基站：通过无线链路和其他无线主机进行通信，并且无线主机都是和基站进行通信之后再通过基站和网络基础设施进行连接，连接到传统的有线的网络当中去。
  4、网络基础设施
  5、自组织网络（Ad Hoc网络）：所有主机互相之间通过无线链路连接在一起，不需要连接到基础设施。

- 二、无线链路与无线网络特性

  无线链路与有线链路的主要区别:
  1.信号强度的衰减

  2.干扰 

  3.多径传播

  4.隐藏终端

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232235351.png" alt="image-20221223223516261" style="zoom:50%;" />

###  第二节、移动网络

- 一、 移动网络基本原理

  1.不同的移动性需求（移动性的需求高低，比如在高铁上和在家里，移动性需求不一样）
  2.网络层地址保持不变的重要性
  3.有线基础设施的支持

- 二、寻址（如何保持地址不变）

  永久地址和转交地址：移动之后要用转交地址，数据发送到永久地址以后由归属代理发送给新网络的路由器，也就是外部代理。归属代理怎么知道原来的计算机跑到哪个网络去了？外部代理会在计算机进入的时候告诉归属代理原来你们网络的一个节点现在到我网络这里了，它在我这网络新地址是多少多少，归属代理知道后就会把接收到要发给这个节点的数据发给外部代理，外部代理根据转交地址转发给移动之后的节点【三角路由】

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232235519.png" alt="image-20221223223542344" style="zoom:50%;" />

- 三、移动结点的路由选择

  1、间接路由选择：由归属代理转发数据给外部代理

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232236334.png" alt="image-20221223223610177" style="zoom:50%;" />

  2、直接路由选择：由通信代理通过归属代理获得转交地址，直接发送到外部代理。【就是归属代理告诉你它不在这了，到××地方去了，你到那找去】

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232236141.png" alt="image-20221223223651006" style="zoom:50%;" />

###  第三节、无线局域网IEEE 802.11（就是WiFi）

- 一、IEEE 802.11结构体系

  1、基站AP
  2、基本服务集BBS
       AP发现：
       ①主动扫描：发送探测帧，等待AP应答
       ②被动扫描：AP发送信标帧通告存在，无线主机接收发现先AP。 
      【由这个基站和它服务范围当中的无线主机构成了一个基本服务集，所有的这些无线网络的节点呢，都要关联一个AP，在它的这个AP的服务范围内就构成了一个的基本服务集，这些基本服务集之间如果要通信，怎么来通信？每一个AP它都要连接到一个网络的基础设施，连接到一个交换机或者是路由器之类的基础网络的设备，将来这些无线节点先把数据发送给AP，再通过AP传输到这些交换机或者是路由器，再通过他们转发到另外一个AP，然后交付给其他的通信节点】

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232237343.png" alt="image-20221223223717098" style="zoom:50%;" />

- 二、IEEE 802.11的MAC协议

  - 无线信道由于它的特点会出现一些特殊情况，比如说隐蔽站的问题，在这种情况下，原来在初步检测的访问控制方法，就不起作用，所以要寻找新的方法，方法是什么呢？带碰撞避免的CSMA，即CSMA/CA，这里的CA就是碰撞避免。

  - 源站和目的站要进行通信之前要发一个请求通信的数据帧（RTS）,发送到目的站被目的站接收后，确认没有别的站在通信，就发回一个可以进行通信的确认信息（CTS帧），并且这个信息要通告给附近的所有无线主机，避免其他无线主机在通信期间发送数据干扰，CTS中包含了此次要通信的大概时间等信息，其他站就知道在这段时间内不要发送数据，无线链路已经被占用

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232237976.png" alt="image-20221223223744636" style="zoom:50%;" />

- 三、IEEE 802.11帧

  * IEEE 802.11的帧类型:

    控制帧、数据帧和管理帧。

  *  MAC首部:
     长度30字节;包括4个地址字段(主要使用目的地址、源地址、AP地址)

    【802.11的数据格式要发生改变，在通信过程中，我们的主机是要和AP进行通信的，先把数据发给AP，然后     再用这个AP再进行转发，或者收到的数据是来自于AP的，在这个通信过程中，多了一个AP，所以数据帧的首部就会发生一些变化】

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232238515.png" alt="image-20221223223811292" style="zoom:50%;" />

  

   

###  第四节、蜂窝网络

- 一、蜂窝网络体系结构

  基站系统BBS：基站控制器BSC、收发基站
  移动交换中心MSC
  网关MSC
  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232240409.png" alt="image-20221223224018092" style="zoom:50%;" />

- 二、蜂窝网络中的移动性管理

  间接路由选择方法

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232240013.png" alt="image-20221223224040806" style="zoom:50%;" />

- 三、移动通信2G/3G/4G/5G网络

  1.2G网络
  信令和语音信道都是数字式的。
  2.3G网络
  无线通信与互联网等多媒体通信结合。
  3.4G网络
  高速率数据业务，不同频段、不同业务环境间的无缝漫游。
  4.5G网络
  超高容量、超可靠性、随时随地可接入性。

###  第五节、移动IP网络

- 一、代理发现

  1.代理通告
  外部代理或归属代理使用一种现有路由器发现协议的扩展协议来通告其服务。
  周期性地在所有连接的链路上广播一个类型字段为9(路由器发现)的ICMP报文。
  2.代理请求
  移动结点广播一个代理请求报文，该报文是一个类型值为10的ICMP报文。
  收到该请求的代理将直接向该移动结点单播一个代理通告。

- 二、向归属代理注册

  <u>发现代理以后就进入一个新的网络，要向归属代理报告去了哪里，如何告诉归属代理？就是向归属代理注册。</u>
  -----移动结点和/或外部代理向一个移动结点的归属代理注册或注销COA所使用的协议。
  1.移动结点向外部代理发送一个移动IP注册报文;
  2.外部代理记录移动结点的永久IP地址，并发送注册请求给归属代理;
  3.归属代理接收注册请求并发送注册应答;
  4.外部代理接收注册应答，然后将其转发给移动结点。

###  第六节、其他典型无线网络简介

1. WiMax
   IEEE 802.16，覆盖范围大，城域网技术，传输距离更远，接入带宽更高。

2. 蓝牙
IEEE 802.15.1，小范围，低功率，低成本，自组织。
3. ZigBee（传感器设备）
IEEE 802.15.4，低功率，省电，低数据速率，低工作周期。

##                               

##                                      第八章、网络安全基础

###  第一节、网络安全概述

- 一、基本概念

  网络安全通信所需要的基本属性:
  1.机密性：最基本的信息安全需求。
  2.消息完整性：即保证消息不会被篡改。
  3.可访问与可用性：打不开网站就是可用性有了问题。
  4.身份认证：

- 二、网络安全威胁

  1、窃听：物理层传输电信号会产生磁场，可以依靠检测磁场变化窃听。
  2、插入：破坏信息完整性。
  3、假冒
  4、劫持
  5、拒绝服务DoS和分布式拒绝服务DDoS：让你的系统无法提供正常服务
  6、映射：攻击者为了找到系统漏洞，扫描你的端口，看提供了什么服务，依此找出漏洞。
  7、嗅探：在网络上的广播信号被接收截获，一般利用嗅探软件。
  8、IP欺骗

###  第二节、数据加密

- 一、基本概念

  1. 明文:未加密的消息。密文:被加密的消息。
  2. 加密:伪装消息以隐藏消息的过程，即明文转变为密文的过程。
  3. 解密:密文转变为明文的过程。

- 二、传统加密方式

  1. 替代密码：用密文字母代替明文字母
  2. 换位密码：打乱顺序，根据一定的规则重新排列明文。

- 三、对称密钥加密

  * 1. 现代密码分类:

  对称密钥密码:加密密钥和解密密钥相同(密钥保密)。

  非对称密钥密码:加密密钥和解密密钥不同。

  * 2. 对称密钥密码分类:

    * 分组密码:若干位信息分成一组再生成明文。

      1.DES:56位密钥，64位分组。
      2.三重DES:使用两个密钥(共112位)，执行三次 DES算法。
      3.AES:分组128位，密钥128/192/256位。
      4.IDEA:分组64位，密钥128位。

    * 流密码

- 四、非对称/公开密钥加密

  - 密钥成对使用，其中一个用于加密，另一个用于解密，且加密密钥可以公开，也称公开密钥加密。
    典型的公钥算法:
    Diffie-Hellman算法 
    RSA算法：

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232243452.png" alt="image-20221223224323367" style="zoom:50%;" />

###  第三节、消息完整性与数字签名

- 一、消息完整性检测方法

  -  密码散列函数
  1.特性:定长输出（输出的长度是特定的）;
  单向性(无法根据散列值逆推报文);
  抗碰撞性(无法找到具有相同散列值的两个报文)。
  2.典型散列函数
  MD5:128位散列值 SHA-1:160位散列值

-  二、报文认证

	-  为了完成报文完整性，可以使用报文认证方法，报文认证是使消息的接收者能够检验收到的消息是否是真实的认证方法。来源真实、未被篡改。
1.报文摘要(数字指纹)
2.报文认证方法
   ①简单报文验证:仅使用报文摘要，无法验证来源真实性。
   ②报文认证码:使用共享认证密钥，但无法防止接收方篡改。

- 三、数字签名

  - 数字签名：身份认证、数据完整性、不可否认性
    1、简单数字签名：直接对报文签名
    2、签名报文摘要

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232243234.png" alt="image-20221223224354854" style="zoom:50%;" />

###  第四节、身份认证

<img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232244033.png" alt="image-20221223224421525" style="zoom:50%;" />

###  第五节、密钥分发中心与证书认证

- 一、密钥分发中心

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232244190.png" alt="image-20221223224443950" style="zoom:50%;" />

- 二、证书认证机构

  数字证书是证明这个公钥是他自己的，十分发公钥的方式，但是私钥还是由自己掌握。

  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232245268.png" alt="image-20221223224505081" style="zoom:50%;" />

###  第六节、防火墙入侵检测系统

- 一、防火墙基本概念

  - 防火墙:能够隔离组织内部网络与公共互联网，允许某些分组通过，而阻止其他分组进入或离开内部网络的软件、硬件或者软件硬件结合的一种设施。
    前提:从外部到内部和从内部到外部的所有流量都经过防火墙。

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232245991.png" alt="image-20221223224525810" style="zoom:50%;" />

- 二、防火墙分类

  1. 无状态分组过滤器
     基于特定的规则对分组是通过还是丢弃进行决策。使用访问控制列表(ACL)实现防火墙规则。ACL一般用的是源IP地址、目的IP地址、源端口或者是目的端口这些信息来判断信息是否通过防火墙。比如我不允许你访问3W，那这个时候我就检查80端口的数据不允许通过。

  2. 有状态分组过滤器 

     跟踪每个TCP连接建立 、拆除，根据状态确定是否允许分组通过。

  3. 应用网关 

     鉴别用户身份或针对授权用户开放特定服务。
     

-  三、入侵检测系统IDS

	- 入侵检测系统（IDS）是当观察到潜在的恶意流量时，能够产生警告大的设备或系统。它在网络内部设置多个监测点，监测网络数据，发现异常行为就会产生报警，使防火墙及时进行处理。
	
	  <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232245231.png" alt="image-20221223224548077" style="zoom:50%;" />

###  第七节、安全网络协议

- 一、安全电子邮件

  -  1.电子邮件安全需求
     (1)机密性;
     (2)完整性;
     (3)身份认证性;
     (4)抗抵赖性。
  2.安全电子邮件标准 PGP：通过采用数字签名、公钥密码、加密技术

- 二、安全套接字层SSL

  - 1、SSL是介于应用层和传输层之间的安全协议，保证传输安全。
    2、SSL握手过程：协商密码组，生成密钥，服务器/客户认证与鉴别。
    3、SSL协议栈

    <img src="https://longchaohuo.oss-cn-hangzhou.aliyuncs.com/yq_img_for_typora/202212232241004.png" alt="image-20221223224150936" style="zoom: 80%;" />

-  三、虚拟专用网VPN和IP安全协议IPSec

	-  1. VPN
   建立在公共网络上的安全通道，实现远程用户、分支机构、业务伙伴等与机构总部网络的安全连接，从而构建针对特定组织机构的专用网络。关键技术:隧道技术，如IPSec。
2. 典型的网络层安全协议--IPSec
   提供机密性、身份鉴别、数据完整性验证和防重放攻击服务。
   体系结构:认证头AH协议、封装安全载荷ESP协议。运行模式:传输模式(AH传输模式、ESP传输模式)、隧道模式(AH隧道模式、ESP隧道模式)。

